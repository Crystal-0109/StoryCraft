<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8" />
        <title>StoryCraft Editor</title>
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <meta name="description" content="" />
        <meta name="keywords" content="" />

        <!-- Favicons -->
        <link href="assets/img/favicon.png" rel="icon" />
        <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

        <!-- Fonts -->
        <link href="https://fonts.googleapis.com" rel="preconnect" />
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
            rel="stylesheet"
        />

        <!-- Vendor CSS Files -->
        <link
            href="assets/vendor/bootstrap/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
            rel="stylesheet"
        />
        <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
        <link
            href="assets/vendor/glightbox/css/glightbox.min.css"
            rel="stylesheet"
        />
        <link
            href="assets/vendor/swiper/swiper-bundle.min.css"
            rel="stylesheet"
        />
        <!-- Quill -->
        <link
            href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css"
            rel="stylesheet"
        />

        <!-- Main CSS File -->
        <link href="assets/css/main.css" rel="stylesheet" />
    </head>
    <body class="index-page page-editor">
        <header id="header" class="header d-flex align-items-center sticky-top">
            <div
                class="container position-relative d-flex align-items-center justify-content-between"
            >
                <a
                    href="index.html"
                    class="logo d-flex align-items-center me-auto me-xl-0"
                >
                    <!-- Uncomment the line below if you also wish to use an image logo -->
                    <!-- <img src="assets/img/logo.png" alt=""> -->
                    <h1 class="sitename">StoryCraft</h1>
                </a>

                <nav id="navmenu" class="navmenu">
                    <ul>
                        <!-- <li>
                            <a href="index.html#hero" class="active">Home</a>
                        </li>
                        <li><a href="index.html#about">About</a></li>
                        <li><a href="index.html#services">Services</a></li> -->
                        <li><a href="search.html">Search</a></li>
                        <li><a href="rewrite.html">Rewrite</a></li>
                        <li><a href="change-style.html">Style</a></li>
                        <li><a href="grammar.html">Grammar</a></li>
                        <li><a href="honorific.html">Honorific</a></li>
                        <li><a href="translate.html">Translate</a></li>
                        <li><a href="scan.html">Scan</a></li>
                        <li><a href="image.html">Image Scan</a></li>
                        <li><a href="speech.html">Speech</a></li>
                        <li><a href="editor.html" class="active">Editor</a></li>
                    </ul>
                    <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
                </nav>
            </div>
        </header>
        <div class="wrap">
            <!-- 에디터 카드 -->
            <div class="card editor-card">
                <div class="ql-frame">
                    <div class="toolbar">
                        <div id="quill-toolbar">
                            <span class="ql-formats">
                                <select class="ql-header">
                                    <option value="1"></option>
                                    <option value="2"></option>
                                    <option selected></option>
                                </select>
                                <select class="ql-font">
                                    <option value="malgun" selected></option>
                                    <option value="serif"></option>
                                    <option value="monospace"></option>
                                    <option value="batang"></option>
                                    <option value="gungsuh"></option>
                                    <option value="gulim"></option>
                                    <option value="noto-sans-kr"></option>
                                </select>
                                <select class="ql-size"></select>
                            </span>
                            <span class="ql-formats">
                                <button class="ql-bold"></button>
                                <button class="ql-italic"></button>
                                <button class="ql-underline"></button>
                                <button class="ql-strike"></button>
                            </span>
                            <span class="ql-formats">
                                <button
                                    class="ql-list"
                                    value="ordered"
                                ></button>
                                <button class="ql-list" value="bullet"></button>
                                <select class="ql-align"></select>
                            </span>
                            <span class="ql-formats">
                                <button class="ql-link"></button>
                                <button class="ql-blockquote"></button>
                                <button class="ql-code-block"></button>
                            </span>
                            <span class="ql-formats">
                                <button class="ql-clean"></button>
                                <button
                                    type="button"
                                    id="btn-image"
                                    class="btn-image"
                                    title="이미지"
                                >
                                    <i class="bi bi-image"></i>
                                </button>
                            </span>
                            <span class="ql-formats edit-upload">
                                <input
                                    id="ocrFile"
                                    type="file"
                                    accept="image/*,application/pdf"
                                    hidden
                                />
                                <label
                                    for="ocrFile"
                                    class="edit-upload__btn"
                                    title="파일 업로드"
                                    aria-label="파일 업로드"
                                >
                                    <i class="bi bi-folder-fill"></i
                                    ><span class="edit-upload__text"
                                        >파일 업로드</span
                                    >
                                </label>
                                <span
                                    id="ocrFileName"
                                    class="edit-upload__name"
                                    hidden
                                ></span>
                            </span>
                            <span class="ql-formats">
                                <form id="uploadForm">
                                    <button
                                        id="editorStartRecord"
                                        type="button"
                                    >
                                        🎙️
                                    </button>
                                    <button
                                        id="editorStopRecord"
                                        type="button"
                                        disabled
                                    >
                                        🛑
                                    </button>
                                    <button
                                        id="editorInsertRecord"
                                        type="button"
                                        disabled
                                    >
                                        ⤵️
                                    </button>
                                </form>
                            </span>
                        </div>
                    </div>
                    <div id="quill" class="editor"></div>
                </div>

                <textarea id="userInput" style="display: none"></textarea>
                <input id="styleInput" type="hidden" />
                <input id="translateInput" type="hidden" />
            </div>

            <!-- 사이드 툴 패널 -->
            <div class="card side">
                <section class="panel">
                    <div class="panel-title">Translate & Import</div>
                    <div class="grid-2" style="margin-bottom: 8px">
                        <select
                            id="sourceSelector"
                            class="sc-select"
                            title="원본 언어"
                        >
                            <option value="auto" selected>자동 감지</option>
                            <option value="gu">구자라트어</option>
                            <option value="el">그리스어</option>
                            <option value="ne">네팔어</option>
                            <option value="nl">네덜란드어</option>
                            <option value="de">독일어</option>
                            <option value="ru">러시아어</option>
                            <option value="ro">루마니아어</option>
                            <option value="mr">마라티어</option>
                            <option value="ms">말레이어</option>
                            <option value="vi">베트남어</option>
                            <option value="bn">벵골어</option>
                            <option value="sv">스웨덴어</option>
                            <option value="es">스페인어</option>
                            <option value="af">아프리칸스어</option>
                            <option value="ar">아랍어</option>
                            <option value="en">영어</option>
                            <option value="uk">우크라이나어</option>
                            <option value="it">이탈리아어</option>
                            <option value="ja">일본어</option>
                            <option value="jv">자바어</option>
                            <option value="ka">조지아어</option>
                            <option value="zh-CN">중국어(간체)</option>
                            <option value="zh-TW">중국어(번체)</option>
                            <option value="ta">타밀어</option>
                            <option value="th">태국어</option>
                            <option value="tr">터키어</option>
                            <option value="fa">페르시아어</option>
                            <option value="pt">포르투갈어</option>
                            <option value="pl">폴란드어</option>
                            <option value="fr">프랑스어</option>
                            <option value="ko">한국어</option>
                            <option value="hi">힌디어</option>
                        </select>

                        <!-- 대상 언어 선택 -->
                        <select
                            id="targetSelector"
                            class="sc-select"
                            title="대상 언어"
                        >
                            <option value="gu">구자라트어</option>
                            <option value="el">그리스어</option>
                            <option value="ne">네팔어</option>
                            <option value="nl">네덜란드어</option>
                            <option value="de">독일어</option>
                            <option value="ru">러시아어</option>
                            <option value="ro">루마니아어</option>
                            <option value="mr">마라티어</option>
                            <option value="ms">말레이어</option>
                            <option value="vi">베트남어</option>
                            <option value="bn">벵골어</option>
                            <option value="sv">스웨덴어</option>
                            <option value="es">스페인어</option>
                            <option value="af">아프리칸스어</option>
                            <option value="ar">아랍어</option>
                            <option value="en" selected>영어</option>
                            <option value="uk">우크라이나어</option>
                            <option value="it">이탈리아어</option>
                            <option value="ja">일본어</option>
                            <option value="jv">자바어</option>
                            <option value="ka">조지아어</option>
                            <option value="zh-CN">중국어(간체)</option>
                            <option value="zh-TW">중국어(번체)</option>
                            <option value="ta">타밀어</option>
                            <option value="th">태국어</option>
                            <option value="tr">터키어</option>
                            <option value="fa">페르시아어</option>
                            <option value="pt">포르투갈어</option>
                            <option value="pl">폴란드어</option>
                            <option value="fr">프랑스어</option>
                            <option value="ko">한국어</option>
                            <option value="hi">힌디어</option>
                        </select>
                    </div>

                    <div class="grid-1">
                        <button
                            class="sc-btn sc-btn--primary"
                            id="btn-translate"
                        >
                            🌐 번역
                        </button>
                    </div>
                </section>

                <div class="hr"></div>

                <!-- 문체변경 -->
                <section class="panel">
                    <div class="panel-title">Style & Tone</div>
                    <div class="grid-2" style="margin-bottom: 8px">
                        <select
                            id="styleSelector"
                            class="sc-select"
                            title="문체 선택"
                        >
                            <option value="casual">구어체</option>
                            <option value="formal">격식체</option>
                            <option value="literary">문학체</option>
                            <option value="academic">학술체</option>
                        </select>
                        <button
                            class="sc-btn sc-btn--primary"
                            id="btn-style"
                            onclick="applyStyle()"
                        >
                            ✒️ 문체변경
                        </button>
                    </div>

                    <div class="grid-2">
                        <button
                            class="sc-btn sc-btn--honorific"
                            id="btn-honorific"
                        >
                            🙇 높임말
                        </button>

                        <button
                            class="sc-btn sc-btn--informal"
                            id="btn-informal"
                        >
                            🙂 반말
                        </button>
                    </div>
                </section>

                <div class="hr"></div>

                <!-- 첨삭/요약/확장 -->
                <section class="panel">
                    <div class="panel-title">Rewrite & Summary</div>
                    <div class="grid-2" style="margin-bottom: 8px">
                        <button class="sc-btn sc-btn--summary" id="btn-summary">
                            🧾 요약
                        </button>

                        <button class="sc-btn sc-btn--expand" id="btn-expand">
                            ➕ 확장
                        </button>
                    </div>
                    <div class="grid-1">
                        <button class="sc-btn sc-btn--primary" id="btn-rewrite">
                            🛠️ 재작성
                        </button>
                    </div>
                </section>
                <!-- 문법 교정 -->
                <section class="panel">
                    <div class="panel-title">Grammar</div>
                    <div class="grid-1">
                        <button class="sc-btn sc-btn--primary" id="btn-grammar">
                            ✔️ 문법 교정
                        </button>
                    </div>
                </section>
                <section class="panel sticky">
                    <div class="panel-title">AI Assistant</div>
                    <div class="grid-1">
                        <textarea
                            id="promptText"
                            rows="2"
                            cols="50"
                            placeholder="프롬프트를 입력하세요"
                        ></textarea>
                        <div style="display: flex; gap: 8px">
                            <button
                                class="sc-btn sc-btn--primary"
                                id="btn-prompt-change"
                            >
                                프롬프트
                            </button>
                        </div>
                    </div>
                </section>
                <section class="panel sticky">
                    <div class="panel-title">Export</div>
                    <div class="grid-1">
                        <button
                            class="sc-btn sc-btn--secondary"
                            id="editorPdfDownloadBtn"
                        >
                            ⬇️ PDF로 저장
                        </button>
                    </div>
                </section>
            </div>
        </div>
        <!-- Editor overlay spinner -->
        <div id="edit_spinner" class="edit_spinner" aria-hidden="true">
            <div class="edit_spinner__backdrop"></div>
            <div
                class="edit_spinner__center"
                role="status"
                aria-live="polite"
                aria-label="처리 중"
            >
                <div class="edit_spinner__ring"></div>
                <div class="edit_spinner__label">처리 중…</div>
            </div>
        </div>
        <div
            id="imgMenu"
            class="img-menu"
            aria-hidden="true"
            role="menu"
            aria-labelledby="btn-image"
        >
            <div class="img-menu__title">다음에서 그림 삽입:</div>
            <button
                type="button"
                id="imgMenu-insert"
                class="img-menu__item"
                role="menuitem"
            >
                <i class="bi bi-image"></i> 이미지 삽입
            </button>
            <button
                type="button"
                id="imgMenu-ocr"
                class="img-menu__item"
                role="menuitem"
            >
                <i class="bi bi-file-earmark-text"></i> 이미지 추출
            </button>
        </div>
        <!-- OCR 결과 팝업 -->
        <div
            id="ocrModal"
            class="ocr-modal"
            aria-hidden="true"
            role="dialog"
            aria-modal="true"
        >
            <div class="ocr-modal__dialog">
                <div class="ocr-modal__header">
                    <strong>이미지 텍스트 추출</strong>
                    <button
                        type="button"
                        id="ocrClose"
                        class="ocr-modal__close"
                        aria-label="닫기"
                    >
                        ✕
                    </button>
                </div>
                <div class="ocr-modal__body">
                    <textarea
                        id="ocrText"
                        class="ocr-modal__textarea"
                        placeholder="여기에 추출된 텍스트가 표시됩니다…"
                    ></textarea>
                </div>
                <div class="modal-actions">
                    <button id="ocrInsert" type="button" class="insert-btn">
                        삽입
                    </button>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>

        <!-- Preloader -->
        <div id="preloader"></div>

        <!-- Vendor JS Files -->
        <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="assets/vendor/php-email-form/validate.js"></script>
        <script src="assets/vendor/aos/aos.js"></script>
        <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
        <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
        <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
        <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

        <script src="assets/js/main.js"></script>
        <script src="assets/js/script.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
    </body>
</html>
